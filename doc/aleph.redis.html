<!DOCTYPE html>
<html><head><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>aleph.redis documentation</title></head><body><div id="header"><h1><a href="index.html">Aleph 0.3.0-beta2 API documentation</a></h1></div><div class="sidebar" id="namespaces"><h3>Namespaces</h3><ul><li><a href="aleph.formats.html"><span>aleph.formats</span></a></li><li><a href="aleph.http.html"><span>aleph.http</span></a></li><li><a href="aleph.http.client-middleware.html"><span>aleph.http.client-middleware</span></a></li><li><a href="aleph.http.core.html"><span>aleph.http.core</span></a></li><li><a href="aleph.http.netty.html"><span>aleph.http.netty</span></a></li><li><a href="aleph.http.options.html"><span>aleph.http.options</span></a></li><li><a href="aleph.http.websocket.html"><span>aleph.http.websocket</span></a></li><li><a href="aleph.netty.html"><span>aleph.netty</span></a></li><li><a href="aleph.netty.client.html"><span>aleph.netty.client</span></a></li><li><a href="aleph.netty.core.html"><span>aleph.netty.core</span></a></li><li><a href="aleph.netty.server.html"><span>aleph.netty.server</span></a></li><li><a href="aleph.netty.udp.html"><span>aleph.netty.udp</span></a></li><li><a href="aleph.object.html"><span>aleph.object</span></a></li><li class="current"><a href="aleph.redis.html"><span>aleph.redis</span></a></li><li><a href="aleph.redis.protocol.html"><span>aleph.redis.protocol</span></a></li><li><a href="aleph.stomp.html"><span>aleph.stomp</span></a></li><li><a href="aleph.stomp.codec.html"><span>aleph.stomp.codec</span></a></li><li><a href="aleph.stomp.core.html"><span>aleph.stomp.core</span></a></li><li><a href="aleph.stomp.endpoint.html"><span>aleph.stomp.endpoint</span></a></li><li><a href="aleph.stomp.router.html"><span>aleph.stomp.router</span></a></li><li><a href="aleph.tcp.html"><span>aleph.tcp</span></a></li><li><a href="aleph.trace.html"><span>aleph.trace</span></a></li><li><a href="aleph.trace.core.html"><span>aleph.trace.core</span></a></li><li><a href="aleph.trace.operators.html"><span>aleph.trace.operators</span></a></li><li><a href="aleph.trace.parse.html"><span>aleph.trace.parse</span></a></li><li><a href="aleph.trace.router.html"><span>aleph.trace.router</span></a></li><li><a href="aleph.udp.html"><span>aleph.udp</span></a></li></ul></div><div class="sidebar" id="vars"><h3>Public Vars</h3><ul><li><a href="aleph.redis.html#var-enqueue-task"><span>enqueue-task</span></a></li><li><a href="aleph.redis.html#var-pattern-subscribe"><span>pattern-subscribe</span></a></li><li><a href="aleph.redis.html#var-pattern-unsubscribe"><span>pattern-unsubscribe</span></a></li><li><a href="aleph.redis.html#var-receive-task"><span>receive-task</span></a></li><li><a href="aleph.redis.html#var-redis-client"><span>redis-client</span></a></li><li><a href="aleph.redis.html#var-redis-stream"><span>redis-stream</span></a></li><li><a href="aleph.redis.html#var-subscribe"><span>subscribe</span></a></li><li><a href="aleph.redis.html#var-task-channel"><span>task-channel</span></a></li><li><a href="aleph.redis.html#var-unsubscribe"><span>unsubscribe</span></a></li></ul></div><div class="namespace-docs" id="content"><h2>aleph.redis documentation</h2><pre class="doc"></pre><div class="public" id="var-enqueue-task"><h3>enqueue-task</h3><div class="usage"><code>(enqueue-task redis-client queue-name task)</code></div><pre class="doc">Enqueues a task onto a Redis queue. 'task' must be a printable Clojure data structure.
</pre></div><div class="public" id="var-pattern-subscribe"><h3>pattern-subscribe</h3><div class="usage"><code>(pattern-subscribe redis-stream &amp; stream-patterns)</code></div><pre class="doc">Subscribes a stream to zero or more streams matching the patterns given.  Corresponds to
the PSUBSCRIBE command.</pre></div><div class="public" id="var-pattern-unsubscribe"><h3>pattern-unsubscribe</h3><div class="usage"><code>(pattern-unsubscribe redis-stream &amp; stream-patterns)</code></div><pre class="doc">Unsubscribes a stream from zero or more channels matching the patterns given.  Corresponds
to the PUNSUBSCRIBE command.</pre></div><div class="public" id="var-receive-task"><h3>receive-task</h3><div class="usage"><code>(receive-task redis-client &amp; queue-names)</code></div><pre class="doc">Receives a task from one of the specified queues.  Returns a result-channel which will
emit a value with the structure {:queue &quot;queue-name&quot;, :task 1}.  It is assumed that the
value received from Redis will be a readable data structure, and :task will contain a
Clojure data structure.</pre></div><div class="public" id="var-redis-client"><h3>redis-client</h3><div class="usage"><code>(redis-client {:keys [host port charset name password heartbeat?], :or {heartbeat? true, charset :utf-8}, :as options})</code></div><pre class="doc">Returns a function which represents a persistent connection to the Redis server
located at :host.  The 'options' may also specify the :port and :charset used for this
client.  The function expects a vector of strings or keywords and an optional timeout,
in the form

(f [:set &quot;foo&quot; &quot;bar&quot;] timeout?)

The function will return a result-channel representing the response.  To close the
connection, use lamina.connections/close-connection.</pre></div><div class="public" id="var-redis-stream"><h3>redis-stream</h3><div class="usage"><code>(redis-stream options)</code></div><pre class="doc">Returns a channel representing a stream from the Redis server located at :host. 'options'
may also specify the :port and :charset used for this stream.

Initially, the stream is not subscribed to any channels; to receive events, subscribe to
channels using (subscribe stream &amp; channel-names) or
(pattern-subscribe stream &amp; channel-patterns). To unsubscribe, use (unsubscribe ...) and
(pattern-unsubscribe ...).

Messages from the stream will be of the structure:

   {:channel &quot;channel-name&quot;, :message &quot;message&quot;}

:message will always be a string.</pre></div><div class="public" id="var-subscribe"><h3>subscribe</h3><div class="usage"><code>(subscribe redis-stream &amp; stream-names)</code></div><pre class="doc">Subscribes a stream to one or more streams.  Corresponds to the SUBSCRIBE command.
</pre></div><div class="public" id="var-task-channel"><h3>task-channel</h3><div class="usage"><code>(task-channel options &amp; queue-names)</code></div><pre class="doc">Returns a channel that will continuously consume tasks from the specified queue(s).

Closing the channel will halt further consumption.</pre></div><div class="public" id="var-unsubscribe"><h3>unsubscribe</h3><div class="usage"><code>(unsubscribe redis-stream &amp; stream-names)</code></div><pre class="doc">Unsubscribes a stream from one or more streams.  Corresponds to the UNSUBSCRIBE command.
</pre></div></div></body></html>